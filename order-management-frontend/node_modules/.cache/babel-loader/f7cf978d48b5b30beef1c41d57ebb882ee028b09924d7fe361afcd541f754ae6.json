{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Dell\\\\Documents\\\\code\\\\order-management\\\\order-management-frontend\\\\src\\\\components\\\\AnalyticsDashboard.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect } from 'react';\n// import { useQuery } from 'react-query';\n// import { cubejs } from '../cubejsClient';\nimport cube from \"@cubejs-client/core\";\nimport { CubeProvider, useCubeQuery } from '@cubejs-client/react';\n// import { BarChart, Bar, XAxis, YAxis, CartesianGrid, Tooltip, ResponsiveContainer } from 'recharts';\n\nimport { Bar } from \"react-chartjs-2\";\n\n// import \"chartjs-plugin-colorschemes\";\n// import { RdPu4 } from \"chartjs-plugin-colorschemes/src/colorschemes/colorschemes.brewer\";\n\nimport moment from \"moment\";\nimport { Chart as ChartJS, BarElement, CategoryScale, LinearScale, Title, Tooltip, Legend } from 'chart.js';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nChartJS.register(BarElement, CategoryScale, LinearScale, Title, Tooltip, Legend);\nconst cubeApi = cube(\"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpYXQiOjE3MjQxMDI2NzV9.bxMmsCMS4jWzzRTsr9_efC4EidYEew6jR_SZJ-S5eZw\", {\n  apiUrl: \"https://indigo-earwig.aws-eu-central-1.cubecloudapp.dev/cubejs-api/v1\"\n});\nconst OrdersChart = () => {\n  _s();\n  // const { resultSet, isLoading, error, progress } = useCubeQuery({\n  //     measures: [\"Orders.count\"],\n  //     dimensions: [\"ProductCategories.name\"],\n  //     filters: [\n  //       {\n  //         member: \"ProductCategories.name\",\n  //         operator: \"equals\",\n  //         values: [\"Beauty\", \"Clothing\", \"Computers\", \"Electronics\"],\n  //       },\n  //     ],\n  //     timeDimensions: [\n  //       {\n  //         dimension: \"Orders.createdAt\",\n  //         granularity: \"month\",\n  //         dateRange: [\"2022-01-01\", \"2023-01-01\"],\n  //       },\n  //     ],\n  //   });\n\n  // useEffect(() => {\n  //     return () => {\n  //       ChartJS.instances.forEach(instance => {\n  //         instance.destroy();\n  //       });\n  //     };\n  //   }, []);\n\n  const {\n    resultSet,\n    isLoading,\n    error,\n    progress\n  } = useCubeQuery({\n    measures: ['orders.count'],\n    timeDimensions: [{\n      dimension: 'orders.order_date',\n      //   dateRange: 'Last 30 days',\n      dateRange: 'Last 12 months',\n      granularity: 'month'\n    }]\n    // dimensions: ['orders.order_date']\n  });\n\n  // console.log({resultSet});\n  // console.log({isLoading});\n  // console.log({error});\n  // console.log({progress});\n\n  if (isLoading) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: progress && progress.stage && progress.stage.stage || \"Loading...\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 11\n    }, this);\n  }\n  if (error) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: error.toString()\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 16\n    }, this);\n  }\n  if (!resultSet) {\n    return null;\n  }\n  //   console.log({resultSet})\n\n  //Transform data for visualization\n  //   console.log('resultSet', resultSet);\n  //   console.log('seriesNames', resultSet.seriesNames({\n  //     x: [],\n  //     y: [\"orders.order_date\"],\n  //   }));\n  const labels = resultSet.seriesNames({\n    x: [],\n    y: [\"orders.order_date\"]\n  }).map(column => moment(column.yValues[0]).format(\"MMMM\"));\n  //   console.log({labels})\n\n  //   console.log('series', resultSet.series());\n  const datasets = resultSet.series().map((item, i) => {\n    // console.log('item.title', item['title']);\n    // console.log('item.series', item.series);\n    return {\n      label: item.title,\n      data: item.series.map(item => item.value)\n    };\n  });\n  // console.log({datasets})\n\n  // return (\n  //   //Visualize the data\n  //   <Bar\n  //     data={{\n  //       labels,\n  //       datasets,\n  //     }}\n  //     options={{\n  //       legend: {\n  //         position: \"bottom\",\n  //         align: \"start\",\n  //       },\n  //       plugins: {\n  //         colorschemes: {\n  //           scheme: RdPu4,\n  //         },\n  //       },\n  //     }}\n  //   />\n  // );\n  // };\n\n  //   const { data, error } = useCubeQuery({\n  // measures: ['Orders.count'],\n  // timeDimensions: [{\n  //   dimension: 'Orders.order_date',\n  //   dateRange: 'Last 30 days',\n  //   granularity: 'day',\n  // }],\n  // dimensions: ['Orders.order_date']\n  //   });\n\n  //   if (error) {\n  //     return <div>Error loading chart data: {error.message}</div>;\n  //   }\n\n  //   if (!data) {\n  //     return <div>Loading...</div>;\n  //   }\n\n  // const chartData = data.map(item => ({\n  //     date: new Date(item[\"orders.order_date\"]).toLocaleDateString(), // Format the date\n  //     count: parseInt(item[\"orders.count\"]), // Convert count to an integer\n  //   }));\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"p-4\",\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      className: \"text-xl font-bold mb-4\",\n      children: \"Orders Analytics\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 173,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      children: /*#__PURE__*/_jsxDEV(Bar, {\n        data: {\n          labels,\n          datasets\n        },\n        options: {\n          legend: {\n            position: \"bottom\",\n            align: \"start\"\n          }\n          //   plugins: {\n          //     colorschemes: {\n          //       scheme: RdPu4,\n          //     },\n          //   },\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 179,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 175,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 172,\n    columnNumber: 5\n  }, this);\n};\n\n// console.log({cubejs});\n_s(OrdersChart, \"Gq7ieCNfODo6BM24XDTvQJ8c2Wo=\", false, function () {\n  return [useCubeQuery];\n});\n_c = OrdersChart;\nconst AnalyticsDashboard = () => /*#__PURE__*/_jsxDEV(CubeProvider, {\n  cubeApi: cubeApi,\n  children: /*#__PURE__*/_jsxDEV(OrdersChart, {}, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 205,\n    columnNumber: 5\n  }, this)\n}, void 0, false, {\n  fileName: _jsxFileName,\n  lineNumber: 203,\n  columnNumber: 5\n}, this);\n_c2 = AnalyticsDashboard;\nexport default AnalyticsDashboard;\nvar _c, _c2;\n$RefreshReg$(_c, \"OrdersChart\");\n$RefreshReg$(_c2, \"AnalyticsDashboard\");","map":{"version":3,"names":["React","useEffect","cube","CubeProvider","useCubeQuery","Bar","moment","Chart","ChartJS","BarElement","CategoryScale","LinearScale","Title","Tooltip","Legend","jsxDEV","_jsxDEV","register","cubeApi","apiUrl","OrdersChart","_s","resultSet","isLoading","error","progress","measures","timeDimensions","dimension","dateRange","granularity","children","stage","fileName","_jsxFileName","lineNumber","columnNumber","toString","labels","seriesNames","x","y","map","column","yValues","format","datasets","series","item","i","label","title","data","value","className","options","legend","position","align","_c","AnalyticsDashboard","_c2","$RefreshReg$"],"sources":["C:/Users/Dell/Documents/code/order-management/order-management-frontend/src/components/AnalyticsDashboard.js"],"sourcesContent":["import React, { useEffect } from 'react';\r\n// import { useQuery } from 'react-query';\r\n// import { cubejs } from '../cubejsClient';\r\nimport cube from \"@cubejs-client/core\";\r\nimport { CubeProvider, useCubeQuery } from '@cubejs-client/react';\r\n// import { BarChart, Bar, XAxis, YAxis, CartesianGrid, Tooltip, ResponsiveContainer } from 'recharts';\r\n\r\nimport { Bar } from \"react-chartjs-2\";\r\n\r\n// import \"chartjs-plugin-colorschemes\";\r\n// import { RdPu4 } from \"chartjs-plugin-colorschemes/src/colorschemes/colorschemes.brewer\";\r\n\r\nimport moment from \"moment\";\r\n\r\nimport {\r\n    Chart as ChartJS,\r\n    BarElement,\r\n    CategoryScale,\r\n    LinearScale,\r\n    Title,\r\n    Tooltip,\r\n    Legend,\r\n  } from 'chart.js';\r\nChartJS.register(BarElement, CategoryScale, LinearScale, Title, Tooltip, Legend);\r\nconst cubeApi = cube(\r\n    \"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpYXQiOjE3MjQxMDI2NzV9.bxMmsCMS4jWzzRTsr9_efC4EidYEew6jR_SZJ-S5eZw\",\r\n    {\r\n      apiUrl:\r\n        \"https://indigo-earwig.aws-eu-central-1.cubecloudapp.dev/cubejs-api/v1\",\r\n    }\r\n  );\r\n\r\nconst OrdersChart = () => {\r\n    // const { resultSet, isLoading, error, progress } = useCubeQuery({\r\n    //     measures: [\"Orders.count\"],\r\n    //     dimensions: [\"ProductCategories.name\"],\r\n    //     filters: [\r\n    //       {\r\n    //         member: \"ProductCategories.name\",\r\n    //         operator: \"equals\",\r\n    //         values: [\"Beauty\", \"Clothing\", \"Computers\", \"Electronics\"],\r\n    //       },\r\n    //     ],\r\n    //     timeDimensions: [\r\n    //       {\r\n    //         dimension: \"Orders.createdAt\",\r\n    //         granularity: \"month\",\r\n    //         dateRange: [\"2022-01-01\", \"2023-01-01\"],\r\n    //       },\r\n    //     ],\r\n    //   });\r\n    \r\n\r\n\r\n\r\n    // useEffect(() => {\r\n    //     return () => {\r\n    //       ChartJS.instances.forEach(instance => {\r\n    //         instance.destroy();\r\n    //       });\r\n    //     };\r\n    //   }, []);\r\n\r\n    const { resultSet, isLoading, error, progress } = useCubeQuery({\r\n        measures: ['orders.count'],\r\n    timeDimensions: [{\r\n      dimension: 'orders.order_date',\r\n    //   dateRange: 'Last 30 days',\r\n    dateRange: 'Last 12 months',\r\n      granularity: 'month',\r\n    }],\r\n    // dimensions: ['orders.order_date']\r\n      });\r\n\r\n    // console.log({resultSet});\r\n    // console.log({isLoading});\r\n    // console.log({error});\r\n    // console.log({progress});\r\n      \r\n    if (isLoading) {\r\n        return (\r\n          <div>\r\n            {(progress && progress.stage && progress.stage.stage) || \"Loading...\"}\r\n          </div>\r\n        );\r\n      }\r\n    \r\n      if (error) {\r\n        return <div>{error.toString()}</div>;\r\n      }\r\n    \r\n      if (!resultSet) {\r\n        return null;\r\n      }\r\n    //   console.log({resultSet})\r\n\r\n\r\n  //Transform data for visualization\r\n//   console.log('resultSet', resultSet);\r\n//   console.log('seriesNames', resultSet.seriesNames({\r\n//     x: [],\r\n//     y: [\"orders.order_date\"],\r\n//   }));\r\n  const labels = resultSet\r\n  .seriesNames({\r\n    x: [],\r\n    y: [\"orders.order_date\"],\r\n  })\r\n  .map((column) => moment(column.yValues[0]).format(\"MMMM\"));\r\n//   console.log({labels})\r\n\r\n//   console.log('series', resultSet.series());\r\nconst datasets = resultSet.series().map((item, i) => {\r\n    // console.log('item.title', item['title']);\r\n    // console.log('item.series', item.series);\r\n  return {\r\n    label: item.title,\r\n    data: item.series.map((item) => item.value),\r\n  };\r\n});\r\n// console.log({datasets})\r\n\r\n// return (\r\n//   //Visualize the data\r\n//   <Bar\r\n//     data={{\r\n//       labels,\r\n//       datasets,\r\n//     }}\r\n//     options={{\r\n//       legend: {\r\n//         position: \"bottom\",\r\n//         align: \"start\",\r\n//       },\r\n//       plugins: {\r\n//         colorschemes: {\r\n//           scheme: RdPu4,\r\n//         },\r\n//       },\r\n//     }}\r\n//   />\r\n// );\r\n// };\r\n\r\n\r\n//   const { data, error } = useCubeQuery({\r\n    // measures: ['Orders.count'],\r\n    // timeDimensions: [{\r\n    //   dimension: 'Orders.order_date',\r\n    //   dateRange: 'Last 30 days',\r\n    //   granularity: 'day',\r\n    // }],\r\n    // dimensions: ['Orders.order_date']\r\n//   });\r\n\r\n//   if (error) {\r\n//     return <div>Error loading chart data: {error.message}</div>;\r\n//   }\r\n\r\n//   if (!data) {\r\n//     return <div>Loading...</div>;\r\n//   }\r\n\r\n\r\n\r\n// const chartData = data.map(item => ({\r\n//     date: new Date(item[\"orders.order_date\"]).toLocaleDateString(), // Format the date\r\n//     count: parseInt(item[\"orders.count\"]), // Convert count to an integer\r\n//   }));\r\n\r\n  return (\r\n    <div className=\"p-4\">\r\n      <h1 className=\"text-xl font-bold mb-4\">Orders Analytics</h1>\r\n      {/* <div className=\"chart-container\"> */}\r\n      <div>\r\n        {/* Implement chart rendering with data */}\r\n        {/* You can use a chart library like Chart.js or Recharts */}\r\n        {/* <pre>{JSON.stringify(data, null, 2)}</pre> */}\r\n        <Bar\r\n    data={{\r\n      labels,\r\n      datasets,\r\n    }}\r\n    options={{\r\n      legend: {\r\n        position: \"bottom\",\r\n        align: \"start\",\r\n      },\r\n    //   plugins: {\r\n    //     colorschemes: {\r\n    //       scheme: RdPu4,\r\n    //     },\r\n    //   },\r\n    }}\r\n  />\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\n// console.log({cubejs});\r\nconst AnalyticsDashboard = () => (\r\n    <CubeProvider cubeApi={cubeApi}>\r\n{/*   <CubeProvider client={cubejs}> */}\r\n    <OrdersChart />\r\n   </CubeProvider>\r\n);\r\n\r\nexport default AnalyticsDashboard;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}